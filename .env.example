# =============================================
# Environment Configuration Example File
# Copy this file to .env and adjust the values
# =============================================

## ----  BASIC SYSTEM CONFIGURATION ----

# Web Application Settings
WEB_NODE_ENV="self-hosted"                    # self-hosted, development, production
WEB_HOSTNAME_API="localhost"                  # API hostname
WEB_PORT_API=3001                            # API port
WEB_PORT=3000                                # Web application port
API_WEBHOOKS_PORT=3332                       # Webhooks service port
GLOBAL_API_CONTAINER_NAME="kodus-api"        # API container name

# Run migrations and seeds automatically on app startup
RUN_MIGRATIONS=true
RUN_SEEDS=true

# Authentication Settings
NEXTAUTH_URL="http://localhost:3000"      # Base URL for authentication
WEB_NEXTAUTH_SECRET=""                        # NextAuth secret key (generate with: openssl rand -base64 32)
WEB_JWT_SECRET_KEY=""                         # JWT secret key (generate with: openssl rand -base64 32)

## ----  API CONFIGURATION ----

# General API Settings
API_NODE_ENV="development"                    # development, production, test
API_LOG_LEVEL=error                           # error, warn, info, debug
API_LOG_PRETTY=true                           # Log formatting
API_HOST=0.0.0.0                             # API host
API_PORT=3001                                # API port
API_RATE_MAX_REQUEST=100                      # Request rate limit
API_RATE_INTERVAL=1000                        # Rate limit interval in ms
API_CLOUD_MODE=false                          # Enable/disable cloud mode
API_CRYPTO_KEY=                               # Crypto key for encryption/decryption

# JWT Configuration
API_JWT_EXPIRES_IN=365d                       # Token expiration time
API_JWT_SECRET=secret                         # JWT secret key
API_JWT_REFRESHSECRET=refreshSecret           # Refresh token secret key
API_JWT_REFRESH_EXPIRES_IN=7d                 # Refresh token expiration time

## ----  DATABASE CONFIGURATION ----

# Use local containers for Postgres and MongoDB
USE_LOCAL_DB=true

# PostgreSQL Settings
API_DATABASE_ENV="development"                # development, production, test
API_PG_DB_HOST=db_kodus_postgres              # PostgreSQL host
API_PG_DB_PORT=5432                          # PostgreSQL port
API_PG_DB_USERNAME=kodusdev                  # Database username
API_PG_DB_PASSWORD=                          # Database password
API_PG_DB_DATABASE=kodus_db                  # Database name

# MongoDB Settings
API_MG_DB_HOST=db_kodus_mongodb              # MongoDB host
API_MG_DB_PORT=27017                         # MongoDB port
API_MG_DB_USERNAME=kodusdev                  # Database username
API_MG_DB_PASSWORD=                        # Database password
API_MG_DB_DATABASE=kodus                  # Database name
API_MG_DB_PRODUCTION_CONFIG=''               # Additional production settings

## ----  LLM API KEYS ----

# API Keys for LLM Providers
API_OPEN_AI_API_KEY=""     
API_OPENAI_FORCE_BASE_URL=""
API_LLM_PROVIDER_MODEL=""
                    # OpenAI API key

## ----  CRON CONFIGURATION ----
# Format: minute hour day_of_month month day_of_week
# Example: 0 1 * * 5 = Every Friday at 01:00

API_CRON_SYNC_CODE_REVIEW_REACTIONS=* 5 * * *
API_CRON_KODY_LEARNING=0 0 * * 6
API_CRON_CHECK_IF_PR_SHOULD_BE_APPROVED=*/2 * * * *

## ----  GIT INTEGRATIONS ----

CODE_MANAGEMENT_SECRET=
CODE_MANAGEMENT_WEBHOOK_TOKEN=

# GitHub Settings (Fill only if using Github)
API_GITHUB_CODE_MANAGEMENT_WEBHOOK=          # GitHub webhook URL

# Gitlab Settings (Fill only if using Gitlab)
API_GITLAB_CODE_MANAGEMENT_WEBHOOK=          # GitLab webhook URL       # GitLab OAuth Client Secret

# Bitbucket Settings (Fill only if using Bitbucket)
GLOBAL_BITBUCKET_CODE_MANAGEMENT_WEBHOOK=    # Bitbucket webhook URL

# AZURE REPOS Settings (Fill only if using Azure)
GLOBAL_AZURE_REPOS_CODE_MANAGEMENT_WEBHOOK=


## ----  ADDITIONAL INTEGRATIONS ----
# Support Settings
WEB_SUPPORT_DOCS_URL="https://docs.kodus.io" # Documentation URL
WEB_SUPPORT_DISCORD_INVITE_URL="https://discord.gg/CceCdAke" # Discord invite URL
WEB_SUPPORT_TALK_TO_FOUNDER_URL="https://cal.com/gabrielmalinosqui/30min" # Scheduling URL

# RabbitMQ Configuration
USE_LOCAL_RABBITMQ=true
RABBITMQ_HOSTNAME=rabbitmq                   # RabbitMQ hostname in docker network
RABBITMQ_DEFAULT_USER=kodus                  # RabbitMQ user (change in production)
RABBITMQ_DEFAULT_PASS=kodus                  # RabbitMQ password (change in production)
# Keep the URI in sync with the user, password, and vhost above
API_RABBITMQ_URI=amqp://kodus:kodus@rabbitmq:5672/kodus-ai # RabbitMQ connection URI
API_RABBITMQ_ENABLED=true                    # RabbitMQ is required

# MCP Configuration (optional)
API_MCP_SERVER_ENABLED=false
API_KODUS_SERVICE_MCP_MANAGER=http://localhost:3101
API_KODUS_MCP_SERVER_URL=http://localhost:3001/mcp

# MCP Manager Configuration
API_MCP_MANAGER_LOG_LEVEL=info
API_MCP_MANAGER_PORT=3101
API_MCP_MANAGER_NODE_ENV=development
API_MCP_MANAGER_DATABASE_ENV=development
API_MCP_MANAGER_CORS_ORIGINS=*
API_MCP_MANAGER_JWT_SECRET=
API_MCP_MANAGER_COMPOSIO_BASE_URL=https://backend.composio.dev/api/v3
API_MCP_MANAGER_COMPOSIO_API_KEY=
API_MCP_MANAGER_MCP_PROVIDERS=kodusmcp,composio,custom
API_MCP_MANAGER_REDIRECT_URI=http://localhost:3000/setup/mcp/oauth
API_MCP_MANAGER_PG_DB_SCHEMA=mcp-manager
API_MCP_MANAGER_ENCRYPTION_SECRET=